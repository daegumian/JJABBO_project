<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>JJAPBO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />

  <!-- Link Swiper's CSS & JS -->
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

  <link rel="stylesheet" href="css/KBO.css">
  <link rel="stylesheet" href="css/footer.css">
  <link rel="stylesheet" href="css/modal.css">
  <link rel="stylesheet" href="css/slideCenter.css">

  <script src="js/modal.js"></script>
  

  <style>
  </style>

</head>

<body>

  <!-- modal -->
  <div class="modal hidden">
    <div class="modal_box">
      <div class="youtube">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/2jkfHbMLEwA" title="YouTube video player"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen>
        </iframe>
      </div>
      <div class="btn_left" style="cursor: pointer;">
        <img src="img/leftKBO.png" alt="xx"
          class="left_img">
      </div>
      <a href="https://www.youtube.com/watch?v=2jkfHbMLEwA&ab_channel=KBO" class="btn_right">
        <img src="img/rightKBO.png" alt="xx"
          class="right_img">
      </a>

      <p>
        <label for="">
          <input type="checkbox" id="modalCheck">오늘 하루 보지않기
        </label>
      </p>

    </div>

  </div>

  <header>

    <div class="inner" style="margin-top: 15px;">

      <h1 class="logo">
        <a href="http://127.0.0.1:5500/JJABBO_project/KBO.html">
          <img
            src="img/KBO.png"
            alt="x" style="vertical-align: top; width: 70px; ">
        </a>
      </h1>

      <nav class="navi">
        <ul class="navi_inner">
          <li>
            <a style="font-weight: bold; cursor: pointer;">일정/결과</a>
          </li>
          <li>
            <a href="https://allstar.koreabaseball.com/Schedule/Schedule.aspx">순위</a>
          </li>
          <li>
            <a href="https://allstar.koreabaseball.com/Program/Program.aspx">기록</a>
          </li>
          <li>
            <a href="https://allstar.koreabaseball.com/History/History.aspx">선수</a>
          </li>
          <li>
            <a href="https://allstar.koreabaseball.com/News/List.aspx">NEWS</a>
          </li>
          <li>
            <a href="https://allstar.koreabaseball.com/News/List.aspx">KBO</a>
          </li>
        </ul>
      </nav>

      <div class="login">
        <ul class="login_inner">
          <li class="left kboHome">
            <a href="http://127.0.0.1:5500/JJABBO_project/AllStar.html" class="allstarGo">KBO
              올스타전 홈페이지 바로가기</a>
          </li>
          <li class="right kboLogin">
            <a href="">로그인</a>
          </li>
        </ul>

      </div>
    </div>

  </header>

<!-- 사이드바 -->

  <div class="swiper-container">
    <div class="swiper-wrapper">
      <div class="swiper-slide menu">
        <a href="http://127.0.0.1:5500/JJABBO_project/TeamInfo.html" id="menu_text" style="color: orange;">구단정보</a>
        <a href="http://127.0.0.1:5500/JJABBO_project/weather.html" id="menu_text" style="color: skyblue">야구장날씨</a>
        <a href="" id="menu_text" style="color: #09d3d3;">퓨처스리그</a>
        <a href="http://www.kbomarket.com/" id="menu_text" style="color: #ab0419;">KBO마켓</a>
        <a href="https://www.koreabaseball.com/Reference/etc/KboFont.aspx" id="menu_text">KBO폰트</a>
      </div>
      <div class="swiper-slide content">
        <div class="menu-button">
          <div class="bar"></div>
          <div class="bar"></div>
          <div class="bar"></div>
        </div>


        <!-- 센터 -->
        
        <div class="slide">


          <a href="https://www.koreabaseball.com/Board/Notice/View.aspx?boardSe=8733&pageNo=1&pageSc=notice"
            class="imgLink">

            <img src="img/1.jpg" class="bgImg slide">
          </a>
          <div class="btn_box">
            <div class="btn_inner">
              <button class="btn 1">●</button>
            </div>
            <div class="btn_inner">
              <button class="btn 2">●</button>
            </div>
            <div class="btn_inner">
              <button class="btn 3">●</button>
            </div>
            <div class="btn_inner">
              <button class="btn 4">●</button>
            </div>
            <div class="btn_inner">
              <button class="btn 5">●</button>
            </div>
          </div>

        </div>
        <img src="img/cal.jpg" alt="">

      </div>
    </div>
  </div>
  </div>

  <!-- 푸터 -->

  <footer>
    <div id="fnb">
      <div class="wrapping fnb-wrap">
        <ul class="fnb-list">
          <li class="privacy"><a href="#">개인정보 처리방침</a></li>
          <li><a href="#">문자중계</a></li>
          <li><a href="#">고객질문</a></li>
          <li><a href="#">사이트맵</a></li>
        </ul>
      </div>
      <div id="kboInfo" class="wrapping">
        <h2><a href="#"><img src="img/h2_logo.png" alt="xxx"></a></h2>
        <div class="kbo-info">
          <div class="address">
            <p>(사)한국야구위원회 | 서울시 강남구 강남대로 238 | 02)34604600</p>
          </div>
        </div>
        <div class="copyright">
          <span>Copyrightⓒ KBO, All Rights Reserved.</span>
        </div>
      </div>
    </div>
  </footer>

  <!-- 사이드바 -->
  <script>
    var menuButton = document.querySelector('.menu-button');
    var openMenu = function () {
      swiper.slidePrev();
    };
    var swiper = new Swiper('.swiper-container', {
      slidesPerView: 'auto',
      initialSlide: 1,
      resistanceRatio: 0,
      slideToClickedSlide: true,
      on: {
        slideChangeTransitionStart: function () {
          var slider = this;
          if (slider.activeIndex === 0) {
            menuButton.classList.add('cross');
            // required because of slideToClickedSlide
            menuButton.removeEventListener('click', openMenu, true);
          } else {
            menuButton.classList.remove('cross');
          }
        },
        slideChangeTransitionEnd: function () {
          var slider = this;
          if (slider.activeIndex === 1) {
            menuButton.addEventListener('click', openMenu, true);
          }
        },
      },
    });
  </script>
  <!-- 센터 -->
  <script>
    /* 버튼클릭 */
    var btn_box = document.querySelector(".btn_box");
    btn_box.onclick = function () {

      var imgNum = event.target.classList[1];
      var imgLink = document.querySelector(".imgLink");
      var bgImg = document.querySelector(".bgImg");

      bgImg.src = 'img/' + imgNum + '.jpg'

      if (imgNum == 1) {
        imgLink.href = 'https://www.koreabaseball.com/Board/Notice/View.aspx?boardSe=8733&pageNo=1&pageSc=notice';
      } else if (imgNum == 2) {
        imgLink.href = 'https://www.koreabaseball.com/KboTv/WeeklyLineUp/View.aspx?bdSe=44';
      } else if (imgNum == 3) {
        imgLink.href = 'https://www.koreabaseball.com/Event/Etc/SaveSacrifice.aspx';
      } else if (imgNum == 4) {
        imgLink.href = 'https://www.koreabaseball.com/Schedule/Schedule.aspx?seriesId=0,9,6';
      } else {
        imgLink.href = 'https://www.koreabaseball.com/Futures/Schedule/GameList.aspx';
      }

    }


  </script>

  <script>

    var modal = document.querySelector(".modal");
    var hidden = document.querySelector(".hidden");
    var arr = document.cookie;
    if (arr.length != 0) { //쿠키가 있으면
      for (var i = 0; i < arr.length; i++) {
        if (arr[i].indexOf('xxx' + '=') == -1) {
          modal.classList.add('hidden');
        } 
      }
    } else { //쿠키가 없으면

        modal.classList.remove('hidden');

    }

    var modalCheck = document.getElementById("modalCheck");
    var left_img = document.querySelector(".left_img");
    var right_img = document.querySelector(".right_img");
    
    left_img.onclick = function () {

      modal.classList.add('hidden');

      if (modalCheck.checked == true) {
        addCookie();

      } 

    };

    right_img.onclick = function () {

      modal.classList.add('hidden');

      if (modalCheck.checked == true) {

        addCookie();

      } 

    };
  </script>

  <!-- 카카오 로그인 -->

  리다이렉트된 결과(서버 상태여야 한다.)
  <script>
      //1. 카카오 sdk 초기화
      /* Kakao.init('c0b1b6ec421dcbaf0d1a54091f014d26');
      Kakao.isInitialized(); */

      //카카오 서버에서 인가 코드를 url주소를 담아서 보내줌.
      //3. 인가코드 얻기
      var urlSearch = new URLSearchParams(location.search);
      var value = urlSearch.get("code");

      //4. 토큰발급 받기
      if (value != null) {
          ajax();
      }

      function ajax() {

          var url = "http://127.0.0.1:5500/11API/index03.html";
          var key = "4a09ae9fd89a60722da0c07fcc81dfde";

          var data = "grant_type=authorization_code" +
              "&client_id=" + key +
              "&redirect_uri=" + url +
              "&code=" + value;

          //토큰 요청
          fetch('https://kauth.kakao.com/oauth/token', {
              method: "post",
              headers: {
                  "Content-Type": 'application/x-www-form-urlencoded;charset=utf-8', //폼형식
              },
              body: data
          }).then(function (response) {
              return response.json();
          }).then(function (data) {
              //브라우저 종료시에 모두 삭제
              //쿠키 & 세션스토리지에 토큰 값 저장 가능
              sessionStorage.setItem("kakao_access", data.access_token);

              //sdk에 access_token 저장
              // Kakao.Auth.setAccessToken(data.access_token);//

              //사용자 정보 API호출하기
              getUser(data.access_token);
          });
      }

      //5. 토큰기반으로 API호출하기 JS로 처리
      function getUser(token) {
          fetch('https://kapi.kakao.com/v2/user/me', {
              method: 'post',
              headers: {
                  'Authorization': 'Bearer ' + token,
                  'Content-type': 'application/x-www-form-urlencoded;charset=utf-8',
              },

          }).then(function (response) {
              return response.json();
          }).then(function (data) {
              console.log(data);
          })
      }
  </script>


</body>

</html>